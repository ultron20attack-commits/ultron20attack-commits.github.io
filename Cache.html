<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Cache Memory Simulator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .memory-level {
            margin: 15px 0;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        .cpu { background: #ffeaa7; }
        .cache { background: #a29bfe; color: white; }
        .ram { background: #fd79a8; color: white; }
        .cache-block {
            display: inline-block;
            width: 80px;
            height: 60px;
            margin: 5px;
            border: 1px solid #333;
            text-align: center;
            line-height: 60px;
            background: #ddd;
        }
        .cache-block.filled {
            background: #00b894;
            color: white;
        }
        .controls {
            margin: 20px 0;
        }
        button {
            padding: 10px 15px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background: #0984e3;
            color: white;
        }
        .status {
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .hit { background: #00b894; color: white; }
        .miss { background: #d63031; color: white; }
        .data-flow {
            height: 4px;
            background: #636e72;
            margin: 20px 0;
            position: relative;
        }
        .data-packet {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #e17055;
            border-radius: 50%;
            top: -8px;
            left: 0;
            transition: left 1s;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Cache Memory Simulator</h1>
        <p>This shows how the CPU uses cache to speed up data access</p>
        
        <div class="memory-level cpu">
            <h3>üñ•Ô∏è CPU - Needs Data</h3>
            <div>Current Request: <span id="current-request">-</span></div>
        </div>

        <div class="data-flow">
            <div class="data-packet" id="data-packet"></div>
        </div>

        <div class="memory-level cache">
            <h3>‚ö° Cache Memory (Fast, Small)</h3>
            <div>Stores recently used data for quick access</div>
            <div id="cache-blocks">
                <!-- Cache blocks will be generated by JavaScript -->
            </div>
        </div>

        <div class="memory-level ram">
            <h3>üíæ Main Memory - RAM (Slow, Large)</h3>
            <div>Stores all data but slower to access</div>
            <div>Data in RAM: A, B, C, D, E, F</div>
        </div>

        <div class="controls">
            <h3>Request Data:</h3>
            <button onclick="requestData('A')">Data A</button>
            <button onclick="requestData('B')">Data B</button>
            <button onclick="requestData('C')">Data C</button>
            <button onclick="requestData('D')">Data D</button>
            <button onclick="requestData('E')">Data E</button>
            <button onclick="requestData('F')">Data F</button>
            <button onclick="resetCache()" style="background: #636e72;">Reset Cache</button>
        </div>

        <div id="status" class="status">
            Click a button to request data
        </div>

        <div class="stats">
            <h3>Statistics:</h3>
            <div>Cache Hits: <span id="hits">0</span> (Fast - data found in cache)</div>
            <div>Cache Misses: <span id="misses">0</span> (Slow - data fetched from RAM)</div>
            <div>Hit Rate: <span id="hit-rate">0%</span></div>
        </div>

        <div class="explanation">
            <h3>What's Happening:</h3>
            <ol>
                <li><b>CPU requests data</b> (you click a button)</li>
                <li><b>Check Cache first:</b> If data is in cache ‚Üí <span style="color: green">CACHE HIT</span> (fast!)</li>
                <li><b>If not in cache:</b> ‚Üí <span style="color: red">CACHE MISS</span> (slow - get from RAM)</li>
                <li><b>After miss:</b> Data gets copied to cache for next time</li>
            </ol>
            <p><b>Key Point:</b> After you request data once, it stays in cache making future requests faster!</p>
        </div>
    </div>

    <script>
        let cache = ['', '', '', '']; // 4 empty cache slots
        let hits = 0;
        let misses = 0;

        // Initialize cache display
        function initializeCache() {
            const cacheContainer = document.getElementById('cache-blocks');
            cacheContainer.innerHTML = '';
            
            cache.forEach((data, index) => {
                const block = document.createElement('div');
                block.className = `cache-block ${data ? 'filled' : ''}`;
                block.id = `cache-${index}`;
                block.textContent = data || 'Empty';
                cacheContainer.appendChild(block);
            });
        }

        // Request data function
        function requestData(data) {
            document.getElementById('current-request').textContent = data;
            const status = document.getElementById('status');
            const dataPacket = document.getElementById('data-packet');
            
            // Reset animation
            dataPacket.style.left = '0px';
            
            // Check if data is in cache
            const cacheIndex = cache.indexOf(data);
            
            if (cacheIndex !== -1) {
                // CACHE HIT
                hits++;
                status.textContent = `‚úÖ CACHE HIT! Data ${data} found in cache (Fast!)`;
                status.className = 'status hit';
                
                // Animate data flow from cache to CPU
                setTimeout(() => {
                    dataPacket.style.left = '400px';
                    highlightCacheBlock(cacheIndex, true);
                }, 500);
                
            } else {
                // CACHE MISS
                misses++;
                status.textContent = `‚ùå CACHE MISS! Data ${data} not in cache, fetching from RAM (Slow...)`;
                status.className = 'status miss';
                
                // Animate going to RAM
                setTimeout(() => {
                    dataPacket.style.left = '800px';
                    
                    // Animate coming back with data
                    setTimeout(() => {
                        dataPacket.style.left = '400px';
                        
                        // Add data to cache (replace oldest or empty slot)
                        addToCache(data);
                        status.textContent += ` - Data ${data} now stored in cache for next time!`;
                    }, 1000);
                }, 1000);
            }
            
            updateStats();
        }

        // Add data to cache
        function addToCache(data) {
            // Find first empty slot
            let emptyIndex = cache.indexOf('');
            
            if (emptyIndex === -1) {
                // No empty slots, replace the first one (simple strategy)
                emptyIndex = 0;
            }
            
            cache[emptyIndex] = data;
            updateCacheDisplay();
            highlightCacheBlock(emptyIndex, false);
        }

        // Update cache visual display
        function updateCacheDisplay() {
            cache.forEach((data, index) => {
                const block = document.getElementById(`cache-${index}`);
                block.textContent = data || 'Empty';
                block.className = `cache-block ${data ? 'filled' : ''}`;
            });
        }

        // Highlight cache block
        function highlightCacheBlock(index, isHit) {
            const block = document.getElementById(`cache-${index}`);
            block.style.transform = 'scale(1.2)';
            block.style.background = isHit ? '#00b894' : '#fdcb6e';
            
            setTimeout(() => {
                block.style.transform = 'scale(1)';
                block.style.background = cache[index] ? '#00b894' : '#ddd';
            }, 1000);
        }

        // Update statistics
        function updateStats() {
            document.getElementById('hits').textContent = hits;
            document.getElementById('misses').textContent = misses;
            
            const total = hits + misses;
            const hitRate = total > 0 ? Math.round((hits / total) * 100) : 0;
            document.getElementById('hit-rate').textContent = hitRate + '%';
        }

        // Reset cache
        function resetCache() {
            cache = ['', '', '', ''];
            hits = 0;
            misses = 0;
            initializeCache();
            updateStats();
            document.getElementById('status').textContent = 'Cache cleared! Click buttons to request data.';
            document.getElementById('status').className = 'status';
            document.getElementById('current-request').textContent = '-';
            document.getElementById('data-packet').style.left = '0px';
        }

        // Initialize
        initializeCache();
    </script>
</body>
</html>